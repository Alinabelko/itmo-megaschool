# ИТМО агентский бот API

API-сервис для ответов на вопросы об Университете ИТМО с использованием LLM и поиска по различным источникам.

## Описание

Сервис обрабатывает вопросы об Университете ИТМО, используя:
- Поиск по интернету
- Поиск по новостному порталу news.itmo.ru
- LLM для анализа и генерации ответов

## Тестирование

### Публичный доступ
Сервис доступен по адресу: `78.47.98.169:80/api/request`

### Пример запроса

```bash
curl --location --request POST '78.47.98.169:80/api/request' \
--header 'Content-Type: application/json' \
--data-raw '{
  "query": "В каком городе находится главный кампус Университета ИТМО?\n1. Москва\n2. Санкт-Петербург\n3. Екатеринбург\n4. Нижний Новгород",
  "id": 1
}'
```

### Формат ответа

```json
{
  "id": 1,
  "answer": 2,
  "reasoning": "Согласно информации с официального сайта, главный кампус Университета ИТМО находится в Санкт-Петербурге...",
  "sources": [
    "https://itmo.ru/ru/page/159/kontakty.htm",
    "https://news.itmo.ru/ru/news/123"
  ]
}
```

- `id`: ID запроса
- `answer`: номер правильного варианта (или null для вопросов без вариантов)
- `reasoning`: подробное объяснение ответа
- `sources`: использованные источники информации

## Нагрузочное тестирование

Результаты тестирования на 100 параллельных запросов:
- Общее время выполнения: 367.25 секунд (6.12 минут)
- Успешность: 100% (100 успешных запросов из 100)
- Средняя скорость обработки: ~3.67 секунды на запрос
- Параметры теста:
  - Интервал между запросами: 100мс
  - Таймаут соединения: 30 секунд
  - Лимит одновременных соединений: 20

Тест показал стабильную работу сервиса под нагрузкой без ошибок и отказов.

## Локальный запуск

### Предварительные требования

- Docker
- Docker Compose
- Файл `.env` с необходимыми переменными окружения:
  ```
  OPENAI_API_KEY=your_key
  GOOGLE_API_KEY=your_key
  GOOGLE_CSE_ID=your_cse_id
  ```

### Запуск

```bash
docker-compose up -d
```

После запуска сервис будет доступен по адресу: `http://localhost:80/api/request`

### Остановка

```bash
docker-compose down
```

